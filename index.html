<!DOCTYPE html>


<style>
 
 header{
        float: left;
        
    }
nav{
    padding: 50px;
}

</style>

<html lang="PT-BR">
    <head>
        <title>
            SysIot
        </title>
        <meta charset="utf-8">
        <meta name="author" content="Alisson Bomfim">
        <meta name="description" content="Sistema de monitoração de dispositivos">
        <meta name="keywords" content="iot, internet das coisas">
    </head>
    <body>
        <header>
            <img class="logo"  src="/images/icons8-iot-64.png" alt="Logotipo do Sistema">

        </header>
        <nav>
            <a href="index.html">Início</a>
        </nav>

        <section>
            <article>
                
                <canvas id="myChart"></canvas>
                
            </article>
        </section>
    </body>
</html>

<script src="https://cdn.jsdelivr.net/npm/chart.js">
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

<script type="text/javascript" language="javascript">
     const ctx = document.getElementById('myChart');
     new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['20', '30', '40', '50', '60', '70'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

  // Cria uma instância do cliente
  cliente = new Paho.MQTT.Client("192.168.0.104", 1883, "clientId");

  // define manipuladores de retorno de chamada
  cliente.onConnectionLost = onConnectionLost;
  cliente.onMessageArrived = onMessageArrived;

  // conecta o cliente
  cliente.connect({userName:"admin",password:"123",onSuccess:onConnect});


  // chamado quando o cliente se conecta
  function onConnect() {
    // Uma vez estabelecida a conexão, faça uma assinatura e envie uma mensagem.
    console.log("onConnect");
    cliente.subscribe("Mundo");
    mensagem = new Paho.MQTT.Message("Olá");
    message.destinationName = "Mundo";
    cliente.enviar(mensagem);
  }

  // chamado quando o cliente perde a conexão
  function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
      console.log("onConnectionLost:"+responseObject.errorMessage);
    }
  }

  // chamado quando chega uma mensagem
  function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
  }
</script>